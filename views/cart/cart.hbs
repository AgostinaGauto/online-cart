<h2 class="mb-4">Mi carrito</h2>

{{#if cart}}
    <p><strong>Fecha:</strong> {{cart.date}}</p>
    <p><strong>Estado:</strong> {{cart.state}}</p>

    {{#if cartItems.length}}
        <table class="table table-striped mt-4">
            <thead>
                <tr>
                    <th>Producto</th>
                    <th>Precio unitario</th>
                    <th>Cantidad</th>
                    <th>Subtotal</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
                {{#each cartItems}}
                    <tr>
                        <td>{{this.product_relation.name}}</td>
                        <td>$ {{this.price}}</td>
                        <td>{{this.amount}}</td>
                        <td>$ {{this.subtotal}}</td>
                        <td>
                            <form action="/cart-item/delete/{{this.cart_item_id}}" method="POST">
                                <button class="btn btn-danger btn-sm">
                                    Eliminar
                                </button>
                            </form>
                        </td>
                    </tr>
                {{/each}}
            </tbody>
        </table>

        <h4 class="mt-4">Total: $ {{total}}</h4>

        <form action="/cart/confirm/{{cart.cart_id}}" method="POST">
            <button class="btn btn-success mt-3">
                Confirmar compra
            </button>
        </form>

    {{else}}
        <div class="alert alert-info mt-3">
            El carrito está vacío.
        </div>
    {{/if}}

{{else}}
    <div class="alert alert-warning">
        No tenés un carrito activo.
    </div>
{{/if}}